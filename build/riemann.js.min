(function(){var e=function(t,n){var r=e.resolve(t,n||"/"),i=e.modules[r];if(!i)throw new Error("Failed to resolve module "+t+", tried "+r);var s=e.cache[r],o=s?s.exports:i();return o};e.paths=[],e.modules={},e.cache={},e.extensions=[".js",".coffee",".json"],e._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},e.resolve=function(){return function(t,n){function u(t){t=r.normalize(t);if(e.modules[t])return t;for(var n=0;n<e.extensions.length;n++){var i=e.extensions[n];if(e.modules[t+i])return t+i}}function a(t){t=t.replace(/\/+$/,"");var n=r.normalize(t+"/package.json");if(e.modules[n]){var i=e.modules[n](),s=i.browserify;if(typeof s=="object"&&s.main){var o=u(r.resolve(t,s.main));if(o)return o}else if(typeof s=="string"){var o=u(r.resolve(t,s));if(o)return o}else if(i.main){var o=u(r.resolve(t,i.main));if(o)return o}}return u(t+"/index")}function f(e,t){var n=l(t);for(var r=0;r<n.length;r++){var i=n[r],s=u(i+"/"+e);if(s)return s;var o=a(i+"/"+e);if(o)return o}var s=u(e);if(s)return s}function l(e){var t;e==="/"?t=[""]:t=r.normalize(e).split("/");var n=[];for(var i=t.length-1;i>=0;i--){if(t[i]==="node_modules")continue;var s=t.slice(0,i+1).join("/")+"/node_modules";n.push(s)}return n}n||(n="/");if(e._core[t])return t;var r=e.modules.path();n=r.resolve("/",n);var i=n||"/";if(t.match(/^(?:\.\.?\/|\/)/)){var s=u(r.resolve(i,t))||a(r.resolve(i,t));if(s)return s}var o=f(t,i);if(o)return o;throw new Error("Cannot find module '"+t+"'")}}(),e.alias=function(t,n){var r=e.modules.path(),i=null;try{i=e.resolve(t+"/package.json","/")}catch(s){i=e.resolve(t,"/")}var o=r.dirname(i),u=(Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t})(e.modules);for(var a=0;a<u.length;a++){var f=u[a];if(f.slice(0,o.length+1)===o+"/"){var l=f.slice(o.length);e.modules[n+l]=e.modules[o+l]}else f===o&&(e.modules[n]=e.modules[o])}},function(){var t={},n=typeof window!="undefined"?window:{},r=!1;e.define=function(i,s){!r&&e.modules.__browserify_process&&(t=e.modules.__browserify_process(),r=!0);var o=e._core[i]?"":e.modules.path().dirname(i),u=function(t){var n=e(t,o),r=e.cache[e.resolve(t,o)];return r&&r.parent===null&&(r.parent=a),n};u.resolve=function(t){return e.resolve(t,o)},u.modules=e.modules,u.define=e.define,u.cache=e.cache;var a={id:i,filename:i,exports:{},loaded:!1,parent:null};e.modules[i]=function(){return e.cache[i]=a,s.call(a.exports,u,a,a.exports,o,i,t,n),a.loaded=!0,a.exports}}}(),e.define("path",function(e,t,n,r,i,s,o){function u(e,t){var n=[];for(var r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}function a(e,t){var n=0;for(var r=e.length;r>=0;r--){var i=e[r];i=="."?e.splice(r,1):i===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var f=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){var e="",t=!1;for(var n=arguments.length;n>=-1&&!t;n--){var r=n>=0?arguments[n]:s.cwd();if(typeof r!="string"||!r)continue;e=r+"/"+e,t=r.charAt(0)==="/"}return e=a(u(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},n.normalize=function(e){var t=e.charAt(0)==="/",n=e.slice(-1)==="/";return e=a(u(e.split("/"),function(e){return!!e}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(u(e,function(e,t){return e&&typeof e=="string"}).join("/"))},n.dirname=function(e){var t=f.exec(e)[1]||"",n=!1;return t?t.length===1||n&&t.length<=3&&t.charAt(1)===":"?t:t.substring(0,t.length-1):"."},n.basename=function(e,t){var n=f.exec(e)[2]||"";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return f.exec(e)[3]||""}}),e.define("__browserify_process",function(e,t,n,r,i,s,o){var s=t.exports={};s.nextTick=function(){var e=typeof window!="undefined"&&window.setImmediate,t=typeof window!="undefined"&&window.postMessage&&window.addEventListener;if(e)return window.setImmediate;if(t){var n=[];return window.addEventListener("message",function(e){if(e.source===window&&e.data==="browserify-tick"){e.stopPropagation();if(n.length>0){var t=n.shift();t()}}},!0),function(t){n.push(t),window.postMessage("browserify-tick","*")}}return function(t){setTimeout(t,0)}}(),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.binding=function(t){if(t==="evals")return e("vm");throw new Error("No such module. (Possibly not yet loaded)")},function(){var t="/",n;s.cwd=function(){return t},s.chdir=function(r){n||(n=e("path")),t=n.resolve(r,t)}}()}),e.define("/src/topology.js",function(e,t,n,r,i,s,o){function u(e){var t=new Array(e.positions.length);for(var n=0;n<t.length;++n)t[n]=[];var r=e.faces;for(var n=0;n<r.length;++n){var i=r[n];console.log(i);for(var s=0;s<i.length;++s)t[i[s]].push(n)}return t}n.vertex_stars=u}),e.define("/src/repair.js",function(e,t,n,r,i,s,o){function u(e,t){var n={},r=[],i=new Array(e.positions.length);for(var s=0;s<e.positions.length;++s){var o=e.positions[s],u=new Array(3);for(var a=0;a<3;++a)u[a]=Math.floor(o[a]/t);if(u in n)i[s]=n[u];else{var l=r.length;n[u]=l,i[s]=l,r.push(o.slice(0))}}var c=[];for(var s=0;s<e.faces;++s){var h=e.faces[s],p=new Array(3);for(var a=0;a<f.length;++a)p[a]=i[h[a]];c.push(p)}return{positions:r,faces:c}}n.fuse_vertices=u}),e.define("/src/marchingcubes.js",function(e,t,n,r,i,s,o){var u=new Uint32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),a=[[],[0,8,3],[0,1,9],[1,8,3,9,8,1],[1,2,10],[0,8,3,1,2,10],[9,2,10,0,2,9],[2,8,3,2,10,8,10,9,8],[3,11,2],[0,11,2,8,11,0],[1,9,0,2,3,11],[1,11,2,1,9,11,9,8,11],[3,10,1,11,10,3],[0,10,1,0,8,10,8,11,10],[3,9,0,3,11,9,11,10,9],[9,8,10,10,8,11],[4,7,8],[4,3,0,7,3,4],[0,1,9,8,4,7],[4,1,9,4,7,1,7,3,1],[1,2,10,8,4,7],[3,4,7,3,0,4,1,2,10],[9,2,10,9,0,2,8,4,7],[2,10,9,2,9,7,2,7,3,7,9,4],[8,4,7,3,11,2],[11,4,7,11,2,4,2,0,4],[9,0,1,8,4,7,2,3,11],[4,7,11,9,4,11,9,11,2,9,2,1],[3,10,1,3,11,10,7,8,4],[1,11,10,1,4,11,1,0,4,7,11,4],[4,7,8,9,0,11,9,11,10,11,0,3],[4,7,11,4,11,9,9,11,10],[9,5,4],[9,5,4,0,8,3],[0,5,4,1,5,0],[8,5,4,8,3,5,3,1,5],[1,2,10,9,5,4],[3,0,8,1,2,10,4,9,5],[5,2,10,5,4,2,4,0,2],[2,10,5,3,2,5,3,5,4,3,4,8],[9,5,4,2,3,11],[0,11,2,0,8,11,4,9,5],[0,5,4,0,1,5,2,3,11],[2,1,5,2,5,8,2,8,11,4,8,5],[10,3,11,10,1,3,9,5,4],[4,9,5,0,8,1,8,10,1,8,11,10],[5,4,0,5,0,11,5,11,10,11,0,3],[5,4,8,5,8,10,10,8,11],[9,7,8,5,7,9],[9,3,0,9,5,3,5,7,3],[0,7,8,0,1,7,1,5,7],[1,5,3,3,5,7],[9,7,8,9,5,7,10,1,2],[10,1,2,9,5,0,5,3,0,5,7,3],[8,0,2,8,2,5,8,5,7,10,5,2],[2,10,5,2,5,3,3,5,7],[7,9,5,7,8,9,3,11,2],[9,5,7,9,7,2,9,2,0,2,7,11],[2,3,11,0,1,8,1,7,8,1,5,7],[11,2,1,11,1,7,7,1,5],[9,5,8,8,5,7,10,1,3,10,3,11],[5,7,0,5,0,9,7,11,0,1,0,10,11,10,0],[11,10,0,11,0,3,10,5,0,8,0,7,5,7,0],[11,10,5,7,11,5],[10,6,5],[0,8,3,5,10,6],[9,0,1,5,10,6],[1,8,3,1,9,8,5,10,6],[1,6,5,2,6,1],[1,6,5,1,2,6,3,0,8],[9,6,5,9,0,6,0,2,6],[5,9,8,5,8,2,5,2,6,3,2,8],[2,3,11,10,6,5],[11,0,8,11,2,0,10,6,5],[0,1,9,2,3,11,5,10,6],[5,10,6,1,9,2,9,11,2,9,8,11],[6,3,11,6,5,3,5,1,3],[0,8,11,0,11,5,0,5,1,5,11,6],[3,11,6,0,3,6,0,6,5,0,5,9],[6,5,9,6,9,11,11,9,8],[5,10,6,4,7,8],[4,3,0,4,7,3,6,5,10],[1,9,0,5,10,6,8,4,7],[10,6,5,1,9,7,1,7,3,7,9,4],[6,1,2,6,5,1,4,7,8],[1,2,5,5,2,6,3,0,4,3,4,7],[8,4,7,9,0,5,0,6,5,0,2,6],[7,3,9,7,9,4,3,2,9,5,9,6,2,6,9],[3,11,2,7,8,4,10,6,5],[5,10,6,4,7,2,4,2,0,2,7,11],[0,1,9,4,7,8,2,3,11,5,10,6],[9,2,1,9,11,2,9,4,11,7,11,4,5,10,6],[8,4,7,3,11,5,3,5,1,5,11,6],[5,1,11,5,11,6,1,0,11,7,11,4,0,4,11],[0,5,9,0,6,5,0,3,6,11,6,3,8,4,7],[6,5,9,6,9,11,4,7,9,7,11,9],[10,4,9,6,4,10],[4,10,6,4,9,10,0,8,3],[10,0,1,10,6,0,6,4,0],[8,3,1,8,1,6,8,6,4,6,1,10],[1,4,9,1,2,4,2,6,4],[3,0,8,1,2,9,2,4,9,2,6,4],[0,2,4,4,2,6],[8,3,2,8,2,4,4,2,6],[10,4,9,10,6,4,11,2,3],[0,8,2,2,8,11,4,9,10,4,10,6],[3,11,2,0,1,6,0,6,4,6,1,10],[6,4,1,6,1,10,4,8,1,2,1,11,8,11,1],[9,6,4,9,3,6,9,1,3,11,6,3],[8,11,1,8,1,0,11,6,1,9,1,4,6,4,1],[3,11,6,3,6,0,0,6,4],[6,4,8,11,6,8],[7,10,6,7,8,10,8,9,10],[0,7,3,0,10,7,0,9,10,6,7,10],[10,6,7,1,10,7,1,7,8,1,8,0],[10,6,7,10,7,1,1,7,3],[1,2,6,1,6,8,1,8,9,8,6,7],[2,6,9,2,9,1,6,7,9,0,9,3,7,3,9],[7,8,0,7,0,6,6,0,2],[7,3,2,6,7,2],[2,3,11,10,6,8,10,8,9,8,6,7],[2,0,7,2,7,11,0,9,7,6,7,10,9,10,7],[1,8,0,1,7,8,1,10,7,6,7,10,2,3,11],[11,2,1,11,1,7,10,6,1,6,7,1],[8,9,6,8,6,7,9,1,6,11,6,3,1,3,6],[0,9,1,11,6,7],[7,8,0,7,0,6,3,11,0,11,6,0],[7,11,6],[7,6,11],[3,0,8,11,7,6],[0,1,9,11,7,6],[8,1,9,8,3,1,11,7,6],[10,1,2,6,11,7],[1,2,10,3,0,8,6,11,7],[2,9,0,2,10,9,6,11,7],[6,11,7,2,10,3,10,8,3,10,9,8],[7,2,3,6,2,7],[7,0,8,7,6,0,6,2,0],[2,7,6,2,3,7,0,1,9],[1,6,2,1,8,6,1,9,8,8,7,6],[10,7,6,10,1,7,1,3,7],[10,7,6,1,7,10,1,8,7,1,0,8],[0,3,7,0,7,10,0,10,9,6,10,7],[7,6,10,7,10,8,8,10,9],[6,8,4,11,8,6],[3,6,11,3,0,6,0,4,6],[8,6,11,8,4,6,9,0,1],[9,4,6,9,6,3,9,3,1,11,3,6],[6,8,4,6,11,8,2,10,1],[1,2,10,3,0,11,0,6,11,0,4,6],[4,11,8,4,6,11,0,2,9,2,10,9],[10,9,3,10,3,2,9,4,3,11,3,6,4,6,3],[8,2,3,8,4,2,4,6,2],[0,4,2,4,6,2],[1,9,0,2,3,4,2,4,6,4,3,8],[1,9,4,1,4,2,2,4,6],[8,1,3,8,6,1,8,4,6,6,10,1],[10,1,0,10,0,6,6,0,4],[4,6,3,4,3,8,6,10,3,0,3,9,10,9,3],[10,9,4,6,10,4],[4,9,5,7,6,11],[0,8,3,4,9,5,11,7,6],[5,0,1,5,4,0,7,6,11],[11,7,6,8,3,4,3,5,4,3,1,5],[9,5,4,10,1,2,7,6,11],[6,11,7,1,2,10,0,8,3,4,9,5],[7,6,11,5,4,10,4,2,10,4,0,2],[3,4,8,3,5,4,3,2,5,10,5,2,11,7,6],[7,2,3,7,6,2,5,4,9],[9,5,4,0,8,6,0,6,2,6,8,7],[3,6,2,3,7,6,1,5,0,5,4,0],[6,2,8,6,8,7,2,1,8,4,8,5,1,5,8],[9,5,4,10,1,6,1,7,6,1,3,7],[1,6,10,1,7,6,1,0,7,8,7,0,9,5,4],[4,0,10,4,10,5,0,3,10,6,10,7,3,7,10],[7,6,10,7,10,8,5,4,10,4,8,10],[6,9,5,6,11,9,11,8,9],[3,6,11,0,6,3,0,5,6,0,9,5],[0,11,8,0,5,11,0,1,5,5,6,11],[6,11,3,6,3,5,5,3,1],[1,2,10,9,5,11,9,11,8,11,5,6],[0,11,3,0,6,11,0,9,6,5,6,9,1,2,10],[11,8,5,11,5,6,8,0,5,10,5,2,0,2,5],[6,11,3,6,3,5,2,10,3,10,5,3],[5,8,9,5,2,8,5,6,2,3,8,2],[9,5,6,9,6,0,0,6,2],[1,5,8,1,8,0,5,6,8,3,8,2,6,2,8],[1,5,6,2,1,6],[1,3,6,1,6,10,3,8,6,5,6,9,8,9,6],[10,1,0,10,0,6,9,5,0,5,6,0],[0,3,8,5,6,10],[10,5,6],[11,5,10,7,5,11],[11,5,10,11,7,5,8,3,0],[5,11,7,5,10,11,1,9,0],[10,7,5,10,11,7,9,8,1,8,3,1],[11,1,2,11,7,1,7,5,1],[0,8,3,1,2,7,1,7,5,7,2,11],[9,7,5,9,2,7,9,0,2,2,11,7],[7,5,2,7,2,11,5,9,2,3,2,8,9,8,2],[2,5,10,2,3,5,3,7,5],[8,2,0,8,5,2,8,7,5,10,2,5],[9,0,1,5,10,3,5,3,7,3,10,2],[9,8,2,9,2,1,8,7,2,10,2,5,7,5,2],[1,3,5,3,7,5],[0,8,7,0,7,1,1,7,5],[9,0,3,9,3,5,5,3,7],[9,8,7,5,9,7],[5,8,4,5,10,8,10,11,8],[5,0,4,5,11,0,5,10,11,11,3,0],[0,1,9,8,4,10,8,10,11,10,4,5],[10,11,4,10,4,5,11,3,4,9,4,1,3,1,4],[2,5,1,2,8,5,2,11,8,4,5,8],[0,4,11,0,11,3,4,5,11,2,11,1,5,1,11],[0,2,5,0,5,9,2,11,5,4,5,8,11,8,5],[9,4,5,2,11,3],[2,5,10,3,5,2,3,4,5,3,8,4],[5,10,2,5,2,4,4,2,0],[3,10,2,3,5,10,3,8,5,4,5,8,0,1,9],[5,10,2,5,2,4,1,9,2,9,4,2],[8,4,5,8,5,3,3,5,1],[0,4,5,1,0,5],[8,4,5,8,5,3,9,0,5,0,3,5],[9,4,5],[4,11,7,4,9,11,9,10,11],[0,8,3,4,9,7,9,11,7,9,10,11],[1,10,11,1,11,4,1,4,0,7,4,11],[3,1,4,3,4,8,1,10,4,7,4,11,10,11,4],[4,11,7,9,11,4,9,2,11,9,1,2],[9,7,4,9,11,7,9,1,11,2,11,1,0,8,3],[11,7,4,11,4,2,2,4,0],[11,7,4,11,4,2,8,3,4,3,2,4],[2,9,10,2,7,9,2,3,7,7,4,9],[9,10,7,9,7,4,10,2,7,8,7,0,2,0,7],[3,7,10,3,10,2,7,4,10,1,10,0,4,0,10],[1,10,2,8,7,4],[4,9,1,4,1,7,7,1,3],[4,9,1,4,1,7,0,8,1,8,7,1],[4,0,3,7,4,3],[4,8,7],[9,10,8,10,11,8],[3,0,9,3,9,11,11,9,10],[0,1,10,0,10,8,8,10,11],[3,1,10,11,3,10],[1,2,11,1,11,9,9,11,8],[3,0,9,3,9,11,1,2,9,2,11,9],[0,2,11,8,0,11],[3,2,11],[2,3,8,2,8,10,10,8,9],[9,10,2,0,9,2],[2,3,8,2,8,10,0,1,8,1,10,8],[1,10,2],[1,3,8,9,1,8],[0,9,1],[0,3,8],[]],f=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,0,1],[1,0,1],[1,1,1],[0,1,1]],l=[[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[1,5],[2,6],[3,7]];n.marching_cubes=function(e,t){var n=[],r=[],i=0,s=new Float32Array(8),o=new Int32Array(12),c=new Int32Array(3);for(c[2]=0;c[2]<t[2]-1;++c[2],i+=t[0])for(c[1]=0;c[1]<t[1]-1;++c[1],++i)for(c[0]=0;c[0]<t[0]-1;++c[0],++i){var h=0;for(var p=0;p<8;++p){var d=f[p],v=e[i+d[0]+t[0]*(d[1]+t[1]*d[2])];s[p]=v,h|=v>0?1<<p:0}var m=u[h];if(m===0)continue;for(var p=0;p<12;++p){if((m&1<<p)===0)continue;o[p]=n.length;var g=[0,0,0],y=l[p],b=f[y[0]],w=f[y[1]],E=s[y[0]],S=s[y[1]],x=E-S,T=0;Math.abs(x)>1e-6&&(T=E/x);for(var N=0;N<3;++N)g[N]=c[N]+b[N]+T*(w[N]-b[N]);n.push(g)}var C=a[h];for(var p=0;p<C.length;p+=3)r.push([o[C[p]],o[C[p+1]],o[C[p+2]]])}return{vertices:n,faces:r}}}),e.define("/src/marchingtetrahedra.js",function(e,t,n,r,i,s,o){var u=[[0,0,0],[1,0,0],[1,1,0],[0,1,0],[0,0,1],[1,0,1],[1,1,1],[0,1,1]],a=[[0,2,3,7],[0,6,2,7],[0,4,6,7],[0,6,1,2],[0,1,6,4],[5,6,1,4]];n.marching_tetrahedra=function(e,t){function l(e,t){var r=s[e],i=s[t],o=u[e],a=u[t],l=[f[0],f[1],f[2]],c=r-i;Math.abs(c)>1e-6&&(c=r/c);for(var h=0;h<3;++h)l[h]+=o[h]+c*(a[h]-o[h]);return n.push(l),n.length-1}var n=[],r=[],i=0,s=new Float32Array(8),o=new Int32Array(12),f=[0,0,0];for(f[2]=0;f[2]<t[2]-1;++f[2],i+=t[0])for(f[1]=0;f[1]<t[1]-1;++f[1],++i)for(f[0]=0;f[0]<t[0]-1;++f[0],++i){for(var c=0;c<8;++c)s[c]=e[i+u[c][0]+t[0]*(u[c][1]+t[1]*u[c][2])];for(var c=0;c<a.length;++c){var h=a[c],p=0;s[h[0]]<0&&(p|=1),s[h[1]]<0&&(p|=2),s[h[2]]<0&&(p|=4),s[h[3]]<0&&(p|=8);switch(p){case 0:case 15:break;case 14:r.push([l(h[0],h[1]),l(h[0],h[3]),l(h[0],h[2])]);break;case 1:r.push([l(h[0],h[1]),l(h[0],h[2]),l(h[0],h[3])]);break;case 13:r.push([l(h[1],h[0]),l(h[1],h[2]),l(h[1],h[3])]);break;case 2:r.push([l(h[1],h[0]),l(h[1],h[3]),l(h[1],h[2])]);break;case 12:r.push([l(h[1],h[2]),l(h[1],h[3]),l(h[0],h[3]),l(h[0],h[2])]);break;case 3:r.push([l(h[1],h[2]),l(h[0],h[2]),l(h[0],h[3]),l(h[1],h[3])]);break;case 4:r.push([l(h[2],h[0]),l(h[2],h[1]),l(h[2],h[3])]);break;case 11:r.push([l(h[2],h[0]),l(h[2],h[3]),l(h[2],h[1])]);break;case 5:r.push([l(h[0],h[1]),l(h[1],h[2]),l(h[2],h[3]),l(h[0],h[3])]);break;case 10:r.push([l(h[0],h[1]),l(h[0],h[3]),l(h[2],h[3]),l(h[1],h[2])]);break;case 6:r.push([l(h[2],h[3]),l(h[0],h[2]),l(h[0],h[1]),l(h[1],h[3])]);break;case 9:r.push([l(h[2],h[3]),l(h[1],h[3]),l(h[0],h[1]),l(h[0],h[2])]);break;case 7:r.push([l(h[3],h[0]),l(h[3],h[1]),l(h[3],h[2])]);break;case 8:r.push([l(h[3],h[0]),l(h[3],h[2]),l(h[3],h[1])])}}}return{vertices:n,faces:r}}}),e.define("/src/surfacenets.js",function(e,t,n,r,i,s,o){"use strict";var u=new Int32Array(24),a=new Int32Array(256);(function(){var e=0;for(var t=0;t<8;++t)for(var n=1;n<=4;n<<=1){var r=t^n;t<=r&&(u[e++]=t,u[e++]=r)}for(var t=0;t<256;++t){var i=0;for(var n=0;n<24;n+=2){var s=!!(t&1<<u[n]),o=!!(t&1<<u[n+1]);i|=s!==o?1<<(n>>1):0}a[t]=i}})();var f=new Array(4096);(function(){for(var e=0;e<f.length;++e)f[e]=0})(),n.surface_nets=function(e,t){var n=[],r=[],i=0,s=[0,0,0],o=[1,t[0]+1,(t[0]+1)*(t[0]+1)],l=[0,0,0,0,0,0,0,0],c=1;if(o[2]*2>f.length){var h=f.length;f.length=o[2]*2;while(h<f.length)f[h++]=0}for(s[2]=0;s[2]<t[2]-1;++s[2],i+=t[0],c^=1,o[2]=-o[2]){var p=1+(t[0]+1)*(1+c*(t[1]+1));for(s[1]=0;s[1]<t[1]-1;++s[1],++i,p+=2)for(s[0]=0;s[0]<t[0]-1;++s[0],++i,++p){var d=0,v=0,m=i;for(var g=0;g<2;++g,m+=t[0]*(t[1]-2))for(var y=0;y<2;++y,m+=t[0]-2)for(var b=0;b<2;++b,++v,++m){var w=e[m];l[v]=w,d|=w<0?1<<v:0}if(d===0||d===255)continue;var E=a[d],S=[0,0,0],x=0;for(var b=0;b<12;++b){if(!(E&1<<b))continue;++x;var T=u[b<<1],N=u[(b<<1)+1],C=l[T],k=l[N],L=C-k;if(!(Math.abs(L)>1e-6))continue;L=C/L;for(var y=0,g=1;y<3;++y,g<<=1){var A=T&g,O=N&g;A!==O?S[y]+=A?1-L:L:S[y]+=A?1:0}}var M=1/x;for(var b=0;b<3;++b)S[b]=s[b]+M*S[b];f[p]=n.length,n.push(S);for(var b=0;b<3;++b){if(!(E&1<<b))continue;var _=(b+1)%3,D=(b+2)%3;if(s[_]===0||s[D]===0)continue;var P=o[_],H=o[D];d&1?(r.push([f[p],f[p-P],f[p-H]]),r.push([f[p-H],f[p-P],f[p-P-H]])):(r.push([f[p],f[p-H],f[p-P]]),r.push([f[p-P],f[p-H],f[p-P-H]]))}}}return{positions:n,faces:r}}}),e.define("/src/shapes.js",function(e,t,n,r,i,s,o){function u(e,t){function s(t,n){return t+e*n}var n=new Array(e*t);for(var r=0;r<=t;++r)for(var i=0;i<=e;++i)n[i+e*r]=[i,r,0];var o=[];for(var r=0;r<t;++r)for(var i=0;i<e;++i)o.push([s(i,r),s(i+1,r),s(i,r+1)]),o.push([s(i+1,r),s(i+1,r+1),s(i,r+1)]);return{positions:n,faces:o}}function a(e){function n(e,n,r){return e+t*(n+t*r)}var t=e*2,r=new Array(6*t*t),i=[];for(var s=0;s<3;++s){var o=(s+1)%3,u=(s+2)%3;for(var a=0;a<2;++a){var f=2*s+a,l=new Array(3);l[o]=-e,l[u]=-e,l[a]=(1-2*a)*e;for(var c=0;c<=t;++c,++l[u])for(var h=0;h<=t;++h,++l[o])r[n(h,c,f)]=l.slice(0),h<t&&c<t&&(i.push([n(h,c,f),n(h+1,c,f),n(h,c+1,f)]),i.push([n(h+1,c,f),n(h,c+1,f),n(h+1,c+1,f)]))}}return riemann.fuse_vertices({positions:r,faces:i})}function f(e){var t=a(e);for(var n=0;n<t.positions.length;++n){var r=t.positions[n],i=0;for(var s=0;s<3;++s)i+=r[s]*r[s];i=1/Math.sqrt(i);for(var s=0;s<3;++s)r[s]*=i}return t}n.grid_mesh=u,n.cube_mesh=a,n.sphere_mesh=f}),e.define("/src/distance.js",function(e,t,n,r,i,s,o){function f(e,t,n,r,i,s){var o=new Array(3),u=new Array(3),f=0;for(var l=0;l<3;++l)o[l]=t[l]-e[l],f+=o[l]*o[l],u[l]=n[l]-e[l];if(f<a)return s;var c=Math.sqrt(f),h=1/c,p=0;for(var l=0;l<3;++l)o[l]*=h,p+=o[l]*u[l];var d=0;for(var l=0;l<3;++l)d+=Math.pow(u[l]-p*o[l],2);d=Math.sqrt(d),console.log("C:",p,d);var v=r*r,m=i*i,g=(v-m+f)/(2*c),y=v-g*g;if(y<0)return s;y=Math.sqrt(y),console.log("P:",g,y);var b=Math.sqrt(Math.pow(p-g,2)+Math.max(Math.pow(d-y,2),Math.pow(d+y,2)));return console.log("d:",b),Math.min(b,s)}function l(e,t,n,r,i){function x(e,t){return f[e]-f[t]}n||(n=Number.POSITIVE_INFINITY),r||(r=1e-4),i||(i=compute_stars(e));var s=e.faces,o=e.positions,a=new u(new Function("a","return a.d;")),f=[];a.push({d:0,v:t});while(a.size()>0){var l=a.pop();if(l.v in f)continue;var c=l.d,h=l.v;f[h]=c;var p=o[h],d=i[h];for(var v=0;v<d.length;++v){var m=s[d[v]];for(var g=0;g<m.length;++g){var y=m[g];if(y===h||y in f)continue;var b=o[y],w=0;for(var E=0;E<3;++E)w+=Math.pow(p[E]-b[E],2);w=Math.sqrt(w)+c,w<=2*n&&a.push({d:w,v:y})}}}var S=[];for(var h in f)S.push(h);for(;;){var T=!0;S.sort(x);for(var N=0;N<S.length;++N){var h=S[N];if(f[h]>n)break;var d=i[h];for(var C=0;C<d.length;++C){var k=s[d[C]].slice(0);k.sort(x);var L=f[k[2]],A=compute_quadratic_distance(o[k[0]],o[k[1]],o[k[2]],f[k[0]],f[k[1]],f[k[2]]);f[k[2]]=Math.min(A,L),Math.abs(A-L)>r&&(T=!1)}}if(T)return f}}var u=e("./heap.js").BinaryHeap,a=1e-6;n.quadratic_distances=f,n.distance_to_point=l}),e.define("/src/heap.js",function(e,t,n,r,i,s,o){function u(e){this.content=[],this.scoreFunction=e}u.prototype={push:function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.sinkDown(0)),e},remove:function(e){var t=this.content.length;for(var n=0;n<t;n++)if(this.content[n]==e){var r=this.content.pop();n!=t-1&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(e)?this.bubbleUp(n):this.sinkDown(n));return}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(e){var t=this.content[e];while(e>0){var n=Math.floor((e+1)/2)-1,r=this.content[n];if(!(this.scoreFunction(t)<this.scoreFunction(r)))break;this.content[n]=t,this.content[e]=r,e=n}},sinkDown:function(e){var t=this.content.length,n=this.content[e],r=this.scoreFunction(n);for(;;){var i=(e+1)*2,s=i-1,o=null;if(s<t){var u=this.content[s],a=this.scoreFunction(u);a<r&&(o=s)}if(i<t){var f=this.content[i],l=this.scoreFunction(f);l<(o==null?r:a)&&(o=i)}if(o==null)break;this.content[e]=this.content[o],this.content[o]=n,e=o}}},typeof n!="undefined"&&(n.BinaryHeap=u)}),e.define("/index.js",function(e,t,n,r,i,s,o){var u=e("./src/topology.js");n.vertex_stars=u.vertex_stars;var a=e("./src/repair.js");n.fuse_vertices=a.fuse_vertices,n.marching_cubes=e("./src/marchingcubes.js").marching_cubes,n.marching_tetrahedra=e("./src/marchingtetrahedra.js").marching_tetrahedra,n.surfacenets=e("./src/surfacenets.js").surfacenets;var f=e("./src/shapes.js");n.grid_mesh=f.grid_mesh,n.cube_mesh=f.cube_mesh,n.sphere_mesh=f.sphere_mesh,n.distance_to_point=e("./src/distance.js").distance_to_point}),e("/index.js")})();